ИБ - информационная база 1С
## Настройка 1С
1. Создаем роль и пользователя с правами администратора
>[!warning]
>Имя для пользователя нужно обзятаельно задавать на англ


![[Pasted image 20250315212740.png]]

## Создание бота tg
1) находим в tg бота @BotFather
![[Pasted image 20250315202437.png]]
3)  запускаем с помощью команды /start
![[Pasted image 20250315202510.png]]
5) Даем имя новому боту
![[Pasted image 20250315202556.png]]
7) даем "уникальное имя @" боту
 ![[Pasted image 20250315202639.png]]
![[Pasted image 20250315202651.png]]
в ответ мы получаем ключ API (зачеркнут черной линией)![[Pasted image 20250315202758.png]] 8) достаем id чата с ботом
	1. Открываем чат с нашим новым ботом, отправляем сообщение /start
	2. отправляем еще одно сообщение, совершенно не важно какое будет у него содержание
	3. переходим по ссылке https://api.telegram.org/bot<api ключ (см. пункт 7)>/getUpdates
	4. На странице вы увидете JSON массив, под красной линией (см. рис. ниже) находиться id чата с ботом
	 ![[Pasted image 20250315203134.png]]

## Настройка основной конфигурации

1. Открываем папку с скриптом,
2. Создаем файл config.conf в этой же папке
3. Копируем содержимое файла config.example в config.conf
>[!info]
> - server_name - имя сервера
> - one_c_executable - путь до 1cv8.exe !!! не забудьте поменять слово "<версия>" на свою версью !!!
> - work_stoppage - количество времени в сек. которое скрипт будет ожидать (сделано для того чтобы скрипт не начал выгрузку пока последняя фоновая задача выполняется)
> - disk_name - имя диска на котором будут бэкапы
> - folder_path - путь до бэкапов !!! нелья ставсить слеш в начале !!!
> - bot_token - API токен tg бота
> - chat_id - ID чата с ботом
> - bases  - имена информационных баз (прописываем через запятую (base1,base2,base3 ....))

## Настройка конфигураций для ИБ
1.  Открываем папку с скриптом
2.  Создаем файл base_name.conf (вместо base_name напишите имя своей ИБ) в <папке проекта>/settings
3.  Копируем содержимое файла base_config.example в base_name.conf
>[!info]
> Если у ИБ нет пользователя, то заполнять эти данные не надо, но файл конфигурации должен быть !!!
> - username - имя пользователя 
> - password - пароль от пользователя

Структура проекта после настройки:
![[Pasted image 20250318225234.png]]

Пример настройки основного кофига:
![[Pasted image 20250401003256.png]]


Пример настройки конфига для ИБ, для которой нужен логин +пароль:
![[Pasted image 20250318225612.png]]

Пример настройки конфига для ИБ, для которой не нужен логин + парль:
![[Pasted image 20250318225708.png]]

Запускаем скрипт